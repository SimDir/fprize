<header class="container-fluid">
    <div class="row">
    <a href="/lk/" class="col">
        <img src="/public/img/personalAccount/logo.png" alt="logo">
    </a>
    <!-- /.personalAccount-header__img--wrap -->
    <div class="col">
        <div class="personalAccount-header__content-info">
            <!--<span class="header__content-info__data">21.12.2020 г.  /  12:48</span>-->
            <span class="header__content-info__username">Добрый день<br>
                <span><{ username }></span>
            </span> 
            <!-- /.header__content-info__username -->
        </div>
        <!-- /.personalAccount-header__content-info -->

        <div class="personalAccount-header__content-tarrifs">
            <?php if($this->userrole == 300){ ?>
            <span class="header__content-tarrifs__name">Ваш тариф:<br>
                <span>“СТАРТ”</span>
            </span>
            <span class="header__content-tarrifs__period">Срок действия: <span>1 мес.</span> 1000 чеков</span>
            <?php }?>
        </div>
        <!-- /.personalAccount-header__content-tarrifs -->
    
         <div class="personalAccount-header__content-count">
            <div class="personalAccount-header__content-count__left">
                <?php if($this->userrole == 300){ ?>
                <span class="header__content-count__left-title">Остаток<br>чеков, шт:</span>
                <span class="header__content-count__left-num"><{ checkcount }></span>
                <?php }?>
            </div>
            <!-- /.personalAccount-header__content-count__left -->
            <button class="personalAccount-header__content-count__btn">Техническая поддержка</button>
         </div>
         <!-- /.personalAccount-header__content-count -->
    </div>
    <!-- /.personalAccount-header__content -->
    <div class="col">
        <a href="/user/logout">Выход</a>
    </div>
    <!-- /.personalAccount-header__exit -->
    </div>
</header>

<main class="container-fluid">
    <div class="row">
        <aside id="AdminMenu" class="col-2">
            <button v-for="item in Menu" @click.prevent="SetContent(item.src)">{{item.name}}</button>

        </aside>
        <section class="col-10" id="admincontent">
            <{ admincontent }>
        </section>
    </div>
</main>

<script>
    var AdminMenu = new Vue({
        el: '#AdminMenu',
        data: {
            Menu: []
        },
        beforeCreate() {
            document.addEventListener("DOMContentLoaded", this.ready);
            fetch('/lk/getmenu/?AJAX=1')
                    .then(res => res.json())
                    .then(res => {
                        this.Menu = res;
                    });
        },
        methods: {
            SetContent(url) {
                element = document.getElementById('admincontent');
                element.style.display = "none";
                fetch(url + '?AJAX=1', {
                    mode: 'cors',
                    method: 'POST',
                    cache: 'no-cache',
                    credentials: 'same-origin'
                })
                        .then(res => res.json())
                        .then(res => {

                            element.innerHTML = res.Content;

                            $(document).ready(function () {
                                execBodyScripts(element);
                                element.style.display = "block";
//                        console.log("exec_body_scripts(rel)");
                            });
//                    console.log(res);
                        });
            },
            ready() {
                console.log('redi');
            }
        }
    });
</script>

